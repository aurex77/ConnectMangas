<!doctype html>
<!--[if lte IE 7]> <html class="ie7" lang="fr"> <![endif]-->
<!--[if IE 8]> <html class="ie8" lang="fr"> <![endif]-->
<!--[if IE 9]> <html class="ie9" lang="fr"> <![endif]-->
<html lang="fr" ng-app="ConnectMangasApp">
  <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">
      <title>ConnectMangas</title>
      <base href="/ConnectMangas/">
      <link rel="stylesheet" href="client/assets/css/prod/screen.css"/>
      <link rel="stylesheet" href="node_modules/angular-material/angular-material.min.css">
      <link rel="stylesheet" href="node_modules/angular-loading-bar/build/loading-bar.min.css">
      <!--[if IE]>
      <link href="client/assets/css/prod/ie.css" rel="stylesheet" />
      <![endif]-->
      <link rel=stylesheet href="client/assets/css/main.css">
      <link rel=stylesheet href="client/assets/css/connectmangas.css">
      <link rel=stylesheet href="client/assets/css/sAlert.css">
      <link rel=stylesheet href="client/assets/css/chats.css">
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>

  <body>
    <div id="content"  class="topnav" ng-controller="AppCtrl" ng-cloak>
      <md-content>
        <div class="dashboard-page">
          <div class="container-fluid">
            <div class="row">
                <input checked type="checkbox" id="toggle-nav" style="visibility: hidden; display: none">
                <label for="toggle-nav" class="nav-button" aria-label="open/close navigation"></label>
              <div class="col-xs-9 col-sm-3 col-md-2 sidebar nav-inner">
                <div class="text-center">
                  <h2 class="brand"><small>ConnectMangas</small></h2>
                  <img src="client/medias/default/icone.png" class="user-avatar"><br>
                    <a ui-sref=login class="btn btn-white btn-outline btn-rounded btn-sm" ng-show="userCookie" ng-click="logout()">Déconnexion</a>
                </div>
                  <md-input-container style="width: 100%;">
                      <input  type="search" placeholder="Recherche..." ng-change="searchFunc()" ng-model="mySearch" class="ng-pristine ng-valid md-input ng-not-empty ng-touched"/>
                  </md-input-container>
                  <button type="button" ng-show="userCookie" class="btn btn-info" ng-click="isCollapsed = !isCollapsed">
                      Notifications <span class="badge">{{notif_count}}</span>
                  </button>
                  <div uib-collapse="isCollapsed"  ng-repeat="notif in notifications">
                      <div ng-show="notif_count > 0">
                          <span style="float: right;">
                              <a style="cursor: pointer;" ng-click="closeNotif(notif.id)">
                                  <i class="material-icons" style="color: white;">close</i>
                              </a>
                          </span>
                          <p style="margin-right: 20px;text-align: left;">
                              {{ notif.content }}
                          </p>
                      </div>
                  </div>
                <ul class="nav nav-sidebar">
                  <li><a href="home" name="home">Accueil</a></li>
                    <li><a href="calendrier" name="calendrier">Calendrier</a></li>
                    <li><a href="suivi" name="suivi" ng-show="userCookie">Mon suivi</a></li>
                  <li><a href="collection" name="collection" ng-show="userCookie">Collection</a></li>
                  <li><a href="profil/{{ userCookie.username }}" name="profile" ng-show="userCookie">Mon profil</a></li>
                  <li><a href="authentification" name="auth" ng-show="!userCookie">Connexion / Inscription</a></li>

                </ul>
              </div>
              <div class="col-xs-9 col-xs-offset-3 col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" ng-view>
              </div>
                <div id="loading-bar-container"></div>
                <div  class="popup-box chat-popup" style="display:none;" id="qnimate">
                    <div class="popup-head">
                        <div class="popup-head-left pull-left" style="margin-top: 13px;"> Chats Général</div>
                        <div class="popup-head-right pull-right">
                            <div class="btn-group">
                                <div ng-if="show">
                                <button ng-click="chat_hide()" class="chat-header-button" data-toggle="dropdown" type="button" aria-expanded="false">
                                    <i class="glyphicon glyphicon-minus"></i>
                                </button>
                                </div>
                                <div ng-if="!show">
                                    <button ng-click="chat_show()" class="chat-header-button" data-toggle="dropdown" type="button" aria-expanded="false">
                                        <i class="glyphicon glyphicon-plus"></i>
                                    </button>
                                </div>
                                <button ng-click="chat_remove()" class="chat-header-button pull-right" type="button">
                                    <i class="glyphicon glyphicon-off"></i>
                                </button>
                            </div>

                        </div>
                    </div>




                    <div class="popup-messages">

                        <div class="direct-chat-messages">

                            <div class="chat-box-single-line">
                                <abbr class="timestamp">October 8th, 2015</abbr>
                            </div>
                            <div ng-repeat="message in messages"  class="direct-chat-msg doted-border">
                                <div class="direct-chat-info clearfix">
                                    <span class="direct-chat-name pull-left">{{ message.user }}</span>
                                </div>
                                <!-- /.direct-chat-info -->
                                <!--<img alt="message user image" ng-show="userCookie"  src="client/medias/profils/{{ userCookie.img_profil }}" class="direct-chat-img"> -->
                                <img alt="message user image"  src="{{avatarUrl(message.sender_uuid)}}" class="direct-chat-img"><!-- /.direct-chat-img -->
                                <div class="direct-chat-text">
                                    {{ message.content }}  {{message.user.date}}
                                </div>
                                <div class="direct-chat-info clearfix">
                                    <span class="direct-chat-timestamp pull-right"> {{message.date}}</span>
                                </div>

                                <!-- /.direct-chat-text -->
                            </div>

                        </div>

                    </div>
                    <div class="popup-messages-footer">
                        <form ng-submit="sendMessage()">
                            <input id="status_message" ng-model="textbox" placeholder="Type a message..." rows="10" cols="40" name="message">
                            <button type="submit" class="chat-header-button" data-toggle="dropdown" type="button" aria-expanded="false" style="margin-left: 0;margin-top: 0;">
                                <i class="glyphicon glyphicon-send"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
          </div>
        </div>
      </md-content>
    </div>
    <script src="node_modules/angular/angular.min.js"></script>
    <script src="node_modules/angular-aria/angular-aria.min.js"></script>
    <script src="node_modules/angular-animate/angular-animate.min.js"></script>
    <script src="node_modules/angular-material/angular-material.min.js"></script>
    <script src="node_modules/angular-sanitize/angular-sanitize.min.js"></script>
    <script src="node_modules/spin.js/spin.min.js"></script>
    <script src="node_modules/angular-spinner/angular-spinner.min.js"></script>
    <script src="node_modules/angular-ui-bootstrap/dist/ui-bootstrap-tpls.min.js"></script>
    <script src="node_modules/angular-ui-bootstrap/dist/ui-bootstrap.js"></script>
    <script src="node_modules/angular-chat/angular-chat.js"></script>
    <script src="node_modules/pubnub/dist/web/pubnub.min.js"></script>
    <script src="node_modules/pubnub-angular/dist/pubnub-angular.min.js"></script>
    <script src="node_modules/lodash/lodash.min.js"></script>
    <script type='text/javascript' src='node_modules/ng-infinite-scroll/build/ng-infinite-scroll.min.js'></script>
    <script src="node_modules/angular-route/angular-route.min.js"></script>
    <script src="node_modules/angular-messages/angular-messages.min.js"></script>
    <script src="node_modules/angular-cookies/angular-cookies.min.js"></script>
    <script src="client/assets/js/libs/sAlert.js"></script>
    <script type="text/javascript" src="client/assets/js/app.js"></script>
    <script src="node_modules/ng-file-upload/dist/ng-file-upload-shim.min.js"></script>
    <script src="node_modules/ng-file-upload/dist/ng-file-upload.min.js"></script>
    <script src="client/assets/js/libs/ngGeolocation.min.js"></script>
    <script src="node_modules/angular-loading-bar/build/loading-bar.min.js"></script>

  </body>
</html>
